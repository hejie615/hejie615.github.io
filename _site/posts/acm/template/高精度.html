<!DOCTYPE html>

<head>
  <title>
    高精度 &middot; wu-kan
  </title>
  
  <meta name="viewport"  content="width=device-width, initial-scale=1.0, maximum-scale=1"  />
  
  <meta http-equiv="X-UA-Compatible"  content="IE=edge"  />
  
  <meta http-equiv="content-type"  content="text/html; charset=utf-8"  />
  
  <meta name="google-site-verification"  content="YIKi1rBnyUaS-DMYiluseI5kZzTwjCkTFmKkSkMZDJk"  />
  
  <meta name="baidu-site-verification"  content="bEFDJ1LvXb"  />
  
  <meta name="yandex-verification"  content="52253e02830b443c"  />
  
  <link rel="profile"  href="//gmpg.org/xfn/11"  />
  
  <link rel="alternate"  href="/atom.xml"  title="RSS"  type="application/rss+xml"  />
  
  <link rel="apple-touch-icon-precomposed"  href="//www.gravatar.com/avatar/a12c5fff23dde00df79af9aca4e7b6e4?d=wavatar&s=144"  />
  
  <link rel="shortcut icon"  href="//www.gravatar.com/avatar/a12c5fff23dde00df79af9aca4e7b6e4?d=wavatar&s=32"  />
  
  <link rel="stylesheet"  href="//cdn.jsdelivr.net/gh/wu-kan/wu-kan.github.io/public/css/poole.css"  />
  
  <link rel="stylesheet"  href="//cdn.jsdelivr.net/gh/poole/lanyon/public/css/syntax.css"  />
  
  <link rel="stylesheet"  href="//cdn.jsdelivr.net/gh/wu-kan/wu-kan.github.io/public/css/lanyon.css"  />
  
  <link rel="stylesheet"  href="/public/css/wu-kan.css"  />
  
  <link rel="stylesheet"  href="//cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"  />
  
</head>

<body
  class="theme-base-0d layout-reverse sidebar-overlay">
  <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
  <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
  <!-- Toggleable sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-item">
      
      <div class="ih-item circle effect right_to_left">
        <a class="blog-button" title="WuK">
          <div class="img">
            <img src="//www.gravatar.com/avatar/a12c5fff23dde00df79af9aca4e7b6e4?d=wavatar&s=600" alt="img">
          </div>
          <div class="info info-back">
            <p><br>SYSU17级在读<br>计科超算方向<br>ACMer<br>田宫例四驱车<br>永远喜欢水野爱</p>
          </div>
        </a>
      </div>
      
      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=100% height=52 src="//music.163.com/outchain/player?type=0&id=155059595&auto=0&height=32"></iframe>
      <div class="social">
        
        <a href="/atom.xml" class="fa fa-rss fa-fw" title="rss"></a>
        
        <a href="" class="fa fa-qq fa-fw" title="942759535"></a>
        
        <a href="" class="fa fa-weixin fa-fw" title="Wu-_-Kan"></a>
        
        <a href="mailto:wu.kan@foxmail.com" class="fa fa-envelope fa-fw" title="wu.kan@foxmail.com"></a>
        
        <a href="//github.com/wu-kan" class="fa fa-github fa-fw" title="github"></a>
        
        <a href="//codeforces.com/profile/WuK" class="fa fa-bar-chart fa-fw" title="WuK"></a>
        
        <a href="//vjudge.net/user/WuK" class="fa fa-smile-o fa-fw" title="WuK"></a>
        
      </div>
    </div>
    <nav class="sidebar-nav">
      
      <a class="sidebar-nav-item" href="/">
        <span class="fa fa-home fa-fw"></span>&nbsp;首页
      </a>
      
      <a class="sidebar-nav-item" href="/about">
        <span class="fa fa-info-circle fa-fw"></span>&nbsp;关于
      </a>
      
      <a class="sidebar-nav-item" href="/comments">
        <span class="fa fa-comments-o fa-fw"></span>&nbsp;友链和留言
      </a>
      
      <a class="sidebar-nav-item" href="/tags">
        <span class="fa fa-tags fa-fw"></span>&nbsp;标签
      </a>
      
      <a class="sidebar-nav-item" href="/archive">
        <span class="fa fa-archive fa-fw"></span>&nbsp;归档
      </a>
      
    </nav>
    <div class="sidebar-item">
      
      <div id="search-container">
        <input type="text" id="search-input" placeholder="搜索博文">
        <div id="results-container"></div>
      </div>
      <script src="//cdn.jsdelivr.net/npm/simple-jekyll-search/dest/simple-jekyll-search.min.js"></script>
      <script>
        SimpleJekyllSearch({
          placeholder: '搜索博文',
          noResultsText: '没有搜索到文章',
          limit: 10,
          fuzzy: false,
          json: '/public/simple-jekyll-search/search.json',
          searchInput: document.getElementById('search-input'),
          resultsContainer: document.getElementById('results-container'),
          searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>'
          })
      </script>
      
      
      <div id="toc"></div>
      
      
      <script async src="//cdn.jsdelivr.net/npm/busuanzi/bsz.pure.mini.js"></script>
      <span id="busuanzi_container_page_pv">
        被阅读<span id="busuanzi_value_page_pv"></span>次
      </span>
      <br>
      <span id="busuanzi_container_site_pv">
        被访问<span id="busuanzi_value_site_pv"></span>次
      </span>
      <br>
      <span id="busuanzi_container_site_uv">
        第<span id="busuanzi_value_site_uv"></span>位访客
      </span>
      
      
      <div id="run_time"></div>
      <script>
        function show_date_time() {
          window.setTimeout("show_date_time()", 1000);
          BirthDay = new Date("10/04/2017 11:03:56");
          today = new Date();
          timeold = (today.getTime() - BirthDay.getTime());
          sectimeold = timeold / 1000
          secondsold = Math.floor(sectimeold);
          msPerDay = 24 * 60 * 60 * 1000
          e_daysold = timeold / msPerDay
          daysold = Math.floor(e_daysold);
          e_hrsold = (e_daysold - daysold) * 24;
          hrsold = setzero(Math.floor(e_hrsold));
          e_minsold = (e_hrsold - hrsold) * 60;
          minsold = setzero(Math.floor((e_hrsold - hrsold) * 60));
          seconds = setzero(Math.floor((e_minsold - minsold) * 60));
          document.getElementById('run_time').innerHTML = "努力运行" + daysold + "天" + hrsold + "时" + minsold + "分" + seconds + "秒";
        }
        function setzero(i) {
          if (i < 10) { i = "0" + i };
          return i;
        }
        show_date_time();
      </script>
      
      
      <div class="copyright">
        <span class="fa fa-copyright"></span>&nbsp;2019
        WuK&nbsp;已开源于<a href="//github.com/wu-kan/wu-kan.github.io">GitHub</a><br>
      </div>
      
    </div>
  </div>
  <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
  <div class="wrap">
    <h1 class="masthead masthead-title">
      <div class="container">
        高精度
        <a href="/">
          <small>wu-kan</small>
        </a>
      </div>
    </h1>
    <div class="container content">
      <div class="post">
  
  <small class="post-date">
    
    <span class="fa fa-calendar-o"></span>&nbsp;26 Jan 2019
    
    
    <span
      class="fa fa-file-text-o"></span>&nbsp;10119字
    
    
    <span
      class="fa fa-coffee"></span>&nbsp;34分
    
    
    <span id="/posts/acm/template/%E9%AB%98%E7%B2%BE%E5%BA%A6" class="leancloud-visitors" data-flag-title="高精度">
      <span class="fa fa-eye"></span>&nbsp;<span
        class="leancloud-visitors-count">0</span>次
    </span>
    
    <span class="fa fa-creative-commons"></span>&nbsp;<a rel="license" href="//creativecommons.org/licenses/by-sa/4.0/deed.zh">BY-SA 4.0</a>（除特别声明或转载文章外）
  </small>
  
  
  <div class="post-content">
    <h2 id="无符号整数">无符号整数</h2>
<p><a href="https://vjudge.net/solution/16907599">使用范例</a></p>

<p>vector自带大小比较为字典序比较， <code class="highlighter-rouge">!=</code> 、 <code class="highlighter-rouge">==</code> 运算，其余需要时一定记得重载！</p>

<p>减法，当被减数小于减数时减为0。</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">Wint</span> <span class="o">:</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="c1">//继承vector
</span><span class="p">{</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span> <span class="n">base</span> <span class="o">=</span> <span class="mf">1e9</span><span class="p">;</span>
	<span class="n">Wint</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">//普通初始化，当整型数和Wint同时运算时会提升至Wint
</span>	<span class="p">{</span>
		<span class="k">for</span> <span class="p">(;</span> <span class="n">n</span><span class="p">;</span> <span class="n">n</span> <span class="o">/=</span> <span class="n">base</span><span class="p">)</span>
			<span class="n">push_back</span><span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="n">base</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">explicit</span> <span class="n">Wint</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">)</span> <span class="c1">//字符串初始化函数，未判断字符串合法情况
</span>	<span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="kt">int</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">width</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
			<span class="k">for</span> <span class="p">(</span><span class="n">e</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="n">i</span> <span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">e</span> <span class="o">-</span> <span class="n">width</span><span class="p">),</span> <span class="n">push_back</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="n">b</span> <span class="o">!=</span> <span class="n">e</span><span class="p">;</span> <span class="o">++</span><span class="n">b</span><span class="p">)</span>
				<span class="n">back</span><span class="p">()</span> <span class="o">=</span> <span class="n">back</span><span class="p">()</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="sc">'0'</span><span class="p">;</span>
		<span class="n">trim</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">Wint</span> <span class="o">&amp;</span><span class="n">trim</span><span class="p">(</span><span class="kt">bool</span> <span class="n">up</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">//去前导0，是否需要进位，很常用的小函数，为方便返回自身
</span>	<span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">up</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">if</span> <span class="p">((</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
				<span class="o">--</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">],</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">base</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">((</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">base</span><span class="p">)</span>
				<span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">base</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">%=</span> <span class="n">base</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">back</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">pop_back</span><span class="p">();</span>
		<span class="k">for</span> <span class="p">(;</span> <span class="n">up</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">back</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">base</span><span class="p">;</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]</span> <span class="o">%=</span> <span class="n">base</span><span class="p">)</span>
			<span class="n">push_back</span><span class="p">(</span><span class="n">back</span><span class="p">()</span> <span class="o">/</span> <span class="n">base</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">friend</span> <span class="n">istream</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">istream</span> <span class="o">&amp;</span><span class="n">is</span><span class="p">,</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">string</span> <span class="n">s</span><span class="p">;</span> <span class="c1">//懒
</span>		<span class="k">return</span> <span class="n">is</span> <span class="o">&gt;&gt;</span> <span class="n">s</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">Wint</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">is</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">friend</span> <span class="n">ostream</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">n</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
			<span class="k">return</span> <span class="n">os</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="sc">'0'</span><span class="p">);</span>
		<span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">.</span><span class="n">back</span><span class="p">();</span>
		<span class="kt">char</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">fill</span><span class="p">(</span><span class="sc">'0'</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span> <span class="o">~</span><span class="n">i</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
			<span class="n">os</span><span class="p">.</span><span class="n">width</span><span class="p">(</span><span class="n">n</span><span class="p">.</span><span class="n">width</span><span class="p">),</span> <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">return</span> <span class="n">os</span><span class="p">.</span><span class="n">fill</span><span class="p">(</span><span class="n">ch</span><span class="p">),</span> <span class="n">os</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">!=</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
			<span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="o">~</span><span class="n">i</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
				<span class="k">return</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&gt;</span><span class="p">(</span><span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;=</span><span class="p">(</span><span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">);</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&gt;=</span><span class="p">(</span><span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">);</span> <span class="p">}</span>
	<span class="n">Wint</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
			<span class="n">resize</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">());</span> <span class="c1">//保证有足够的位数
</span>		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
			<span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">return</span> <span class="n">trim</span><span class="p">();</span> <span class="c1">//单独进位防自运算
</span>	<span class="p">}</span>
	<span class="k">friend</span> <span class="n">Wint</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="n">Wint</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span> <span class="o">+=</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span>
	<span class="n">Wint</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">++</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span> <span class="c1">//前置版本，懒
</span>	<span class="n">Wint</span> <span class="k">operator</span><span class="o">++</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>					  <span class="c1">//后置版本
</span>	<span class="p">{</span>
		<span class="n">Wint</span> <span class="n">b</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">++*</span><span class="k">this</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">Wint</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">-=</span><span class="p">(</span><span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="c1">//a&lt;b会使a变为0
</span>	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
			<span class="n">resize</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">());</span> <span class="c1">//保证有足够的位数
</span>		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
			<span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">return</span> <span class="n">trim</span><span class="p">();</span> <span class="c1">//单独进位防自运算
</span>	<span class="p">}</span>
	<span class="k">friend</span> <span class="n">Wint</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">Wint</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span> <span class="o">-=</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span>
	<span class="n">Wint</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">--</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span> <span class="c1">//前置版本，懒
</span>	<span class="n">Wint</span> <span class="k">operator</span><span class="o">--</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>					  <span class="c1">//后置版本
</span>	<span class="p">{</span>
		<span class="n">Wint</span> <span class="n">b</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">--*</span><span class="k">this</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">Wint</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">*=</span><span class="p">(</span><span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="c1">//高精度乘法，常规写法
</span>	<span class="p">{</span>
		<span class="n">Wint</span> <span class="n">c</span><span class="p">;</span>
		<span class="n">c</span><span class="p">.</span><span class="n">assign</span><span class="p">(</span><span class="n">size</span><span class="p">()</span> <span class="o">+</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">l</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="c1">//稀疏优化，特殊情况很有效
</span>				<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">];</span>
					<span class="k">for</span> <span class="p">(</span><span class="n">n</span> <span class="o">*=</span> <span class="n">b</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">;</span> <span class="n">n</span><span class="p">;</span> <span class="n">n</span> <span class="o">/=</span> <span class="n">base</span><span class="p">)</span>
						<span class="n">c</span><span class="p">[</span><span class="n">k</span><span class="o">++</span><span class="p">]</span> <span class="o">+=</span> <span class="n">n</span> <span class="o">%</span> <span class="n">base</span><span class="p">;</span>
					<span class="k">for</span> <span class="p">(</span><span class="n">l</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">;</span> <span class="n">c</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">base</span> <span class="o">||</span> <span class="n">l</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">;</span> <span class="n">c</span><span class="p">[</span><span class="n">l</span><span class="o">++</span><span class="p">]</span> <span class="o">%=</span> <span class="n">base</span><span class="p">)</span>
						<span class="n">c</span><span class="p">[</span><span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">c</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">/</span> <span class="n">base</span><span class="p">;</span>
				<span class="p">}</span>
		<span class="k">return</span> <span class="n">swap</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">trim</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="cm">/*
	Wint&amp; operator*=(const Wint &amp;b)//一种效率略高但对位宽有限制的写法
	{
		vector&lt;unsigned long long&gt; n(size()+b.size(),0);//防爆int
		//乘法算完后统一进位效率高，防止乘法溢出（unsigned long long范围0~1.8e19）
		//位宽为9时size()不能超过18（十进制162位），位宽为8时size()不能超过1800（十进制14400位）等等。
		for(int j=0; j!=b.size(); ++j)
			if(b[j])//稀疏优化，特殊情况很有效
				for(int i=0; i!=size(); ++i)
					n[i+j]+=(unsigned long long)(*this)[i]*b[j];
		for(int i=1; i&lt;n.size(); ++i)//这里用&lt;防止位数0，单独进位防自运算
			n[i]+=n[i-1]/base,n[i-1]%=base;
		return assign(n.begin(),n.end()),trim(0);
	}
	Wint&amp; operator*=(const Wint &amp;b)//fft优化乘法，注意double仅15位有效数字，调小Wint::width不超过2，计算自2*log2(base)+2*log2(len)&lt;53
	{
		vector&lt;ll&gt; ax(begin(),end()),bx(b.begin(),b.end());
		ax=FFT(size()+b.size()).ask(ax,bx);
		for(int i=1; i&lt;ax.size(); ++i)
			ax[i]+=ax[i-1]/base,ax[i-1]%=base;
		return assign(ax.begin(),ax.end()),trim(0);
	}
	Wint&amp; operator*=(const Wint &amp;b)//ntt优化，Wint::width不超过2
	{
		vector&lt;ll&gt; ax(begin(),end()),bx(b.begin(),b.end());
		ax=FNTT(size()+b.size(),(7&lt;&lt;26)+1,3).ask(ax,bx);
		for(int i=1; i&lt;ax.size(); ++i)
			ax[i]+=ax[i-1]/base,ax[i-1]%=base;
		return assign(ax.begin(),ax.end()),trim(0);
	}
	*/</span>
	<span class="k">friend</span> <span class="n">Wint</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">Wint</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span> <span class="o">*=</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span>
	<span class="n">Wint</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">/=</span><span class="p">(</span><span class="n">Wint</span> <span class="n">b</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">Wint</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">base</span> <span class="o">/</span> <span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">back</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
		<span class="o">*</span><span class="k">this</span> <span class="o">*=</span> <span class="n">d</span><span class="p">,</span> <span class="n">b</span> <span class="o">*=</span> <span class="n">d</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">assign</span><span class="p">(</span><span class="n">size</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="o">~</span><span class="n">i</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">r</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">]);</span>
			<span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">--</span><span class="n">j</span><span class="p">)</span> <span class="c1">//b.size()==0肯定第一行就出问题的
</span>				<span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">base</span> <span class="o">+</span> <span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">?</span> <span class="n">r</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
			<span class="k">for</span> <span class="p">(</span><span class="n">d</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span> <span class="o">/</span> <span class="n">b</span><span class="p">.</span><span class="n">back</span><span class="p">(),</span> <span class="n">d</span> <span class="o">*=</span> <span class="n">b</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">d</span><span class="p">;</span> <span class="n">r</span> <span class="o">+=</span> <span class="n">b</span><span class="p">)</span>
				<span class="o">--</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
			<span class="n">r</span> <span class="o">-=</span> <span class="n">d</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="n">swap</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">trim</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">//r为加倍后的余数，可通过高精度除低精度得到真正余数，此处略
</span>	<span class="p">}</span>
	<span class="k">friend</span> <span class="n">Wint</span> <span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="n">Wint</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span> <span class="o">/=</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span>
	<span class="n">Wint</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">%=</span><span class="p">(</span><span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span> <span class="o">-=</span> <span class="o">*</span><span class="k">this</span> <span class="o">/</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="n">Wint</span> <span class="k">operator</span><span class="o">%</span><span class="p">(</span><span class="n">Wint</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span> <span class="o">%=</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span>
	<span class="c1">//开平方，改自ZJU模板
</span>	<span class="kt">bool</span> <span class="n">cmp</span><span class="p">(</span><span class="kt">long</span> <span class="kt">long</span> <span class="n">c</span><span class="p">,</span> <span class="kt">int</span> <span class="n">d</span><span class="p">,</span> <span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="k">const</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">d</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="p">)</span>
			<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
		<span class="kt">long</span> <span class="kt">long</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">lo</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">base</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">);</span> <span class="n">lo</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&amp;&amp;</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">~</span><span class="n">i</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">base</span> <span class="o">-</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">-</span> <span class="n">d</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">-</span> <span class="n">d</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">())</span>
				<span class="n">t</span> <span class="o">+=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span> <span class="o">-</span> <span class="n">d</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span>
		<span class="k">return</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">Wint</span> <span class="o">&amp;</span><span class="n">sub</span><span class="p">(</span><span class="k">const</span> <span class="n">Wint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">k</span><span class="p">,</span> <span class="kt">int</span> <span class="n">d</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">+</span> <span class="n">d</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">l</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kt">long</span> <span class="kt">long</span> <span class="n">tmp</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">k</span> <span class="o">*</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">d</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">tmp</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">tmp</span> <span class="o">-</span> <span class="n">base</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">base</span><span class="p">;</span>
				<span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span> <span class="o">-</span> <span class="p">(</span><span class="n">tmp</span> <span class="o">-</span> <span class="n">base</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">base</span> <span class="o">*</span> <span class="n">base</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">else</span>
				<span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="p">((</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">base</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">base</span><span class="p">;</span>
			<span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="p">((</span><span class="o">*</span><span class="k">this</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">base</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">base</span> <span class="o">*</span> <span class="n">base</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="n">trim</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">friend</span> <span class="n">Wint</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">Wint</span> <span class="n">a</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">Wint</span> <span class="n">n</span><span class="p">;</span>
		<span class="n">n</span><span class="p">.</span><span class="n">assign</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">;</span> <span class="o">~</span><span class="n">i</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">for</span> <span class="p">(</span><span class="n">l</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">base</span><span class="p">,</span> <span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="n">r</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span> <span class="n">r</span> <span class="o">-</span> <span class="n">l</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">;</span> <span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="n">r</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">n</span><span class="p">.</span><span class="n">cmp</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">))</span>
					<span class="n">r</span> <span class="o">=</span> <span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
				<span class="k">else</span>
					<span class="n">l</span> <span class="o">=</span> <span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
			<span class="p">}</span>
			<span class="n">a</span><span class="p">.</span><span class="n">sub</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">l</span> <span class="o">+</span> <span class="n">r</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
			<span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">return</span> <span class="n">n</span><span class="p">.</span><span class="n">trim</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="cm">/*
	friend Wint sqrt(const Wint &amp;a)//常规牛顿迭代实现的开平方算法，慢但是好敲
	{
		Wint b=a,c=(b+1)/2;
		while(b!=c)swap(b,c),c=(b+a/b)/2;
		return c;
	}
	friend Wint sqrt(const Wint &amp;a)
	{
		Wint ret,t;
		ret.assign((a.size()+1)&gt;&gt;1,0);
		for(int i=ret.size()-1,l,r; ~i; --i)
		{
			for(l=0,r=a.base; r-l&gt;1;)
			{
				ret[i]=l+(r-l)/2;
				t=ret*ret;
				if(a&lt;t)r=ret[i];
				else l=ret[i];
			}
			if(!l&amp;&amp;i==ret.size()-1)ret.pop_back();
			else ret[i]=l;
		}
		return ret;
	}
	*/</span>
<span class="p">};</span>
</code></pre></div></div>
<h2 id="分数">分数</h2>
<p><a href="https://vjudge.net/solution/16733633">使用示范</a>。</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">Fraction</span>
<span class="p">{</span>
	<span class="n">ll</span> <span class="n">num</span><span class="p">,</span> <span class="n">den</span><span class="p">;</span>
	<span class="n">Fraction</span><span class="p">(</span><span class="n">ll</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ll</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="n">num</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">den</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">d</span> <span class="o">=</span> <span class="n">__gcd</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">den</span><span class="p">),</span> <span class="n">num</span> <span class="o">/=</span> <span class="n">d</span><span class="p">,</span> <span class="n">den</span> <span class="o">/=</span> <span class="n">d</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">den</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">num</span> <span class="o">=</span> <span class="o">-</span><span class="n">num</span><span class="p">,</span> <span class="n">den</span> <span class="o">=</span> <span class="o">-</span><span class="n">den</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">friend</span> <span class="n">Fraction</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">A</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">B</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">ll</span> <span class="n">d</span> <span class="o">=</span> <span class="n">__gcd</span><span class="p">(</span><span class="n">A</span><span class="p">.</span><span class="n">den</span><span class="p">,</span> <span class="n">B</span><span class="p">.</span><span class="n">den</span><span class="p">);</span>
		<span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">B</span><span class="p">.</span><span class="n">den</span> <span class="o">/</span> <span class="n">d</span> <span class="o">*</span> <span class="n">A</span><span class="p">.</span><span class="n">num</span> <span class="o">+</span> <span class="n">A</span><span class="p">.</span><span class="n">den</span> <span class="o">/</span> <span class="n">d</span> <span class="o">*</span> <span class="n">B</span><span class="p">.</span><span class="n">num</span><span class="p">,</span> <span class="n">A</span><span class="p">.</span><span class="n">den</span> <span class="o">/</span> <span class="n">d</span> <span class="o">*</span> <span class="n">B</span><span class="p">.</span><span class="n">den</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">Fraction</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span> <span class="o">+</span> <span class="n">c</span><span class="p">;</span> <span class="p">}</span>
	<span class="n">Fraction</span> <span class="k">operator</span><span class="o">-</span><span class="p">()</span> <span class="k">const</span>
	<span class="p">{</span>
		<span class="n">Fraction</span> <span class="n">r</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
		<span class="k">return</span> <span class="n">r</span><span class="p">.</span><span class="n">num</span> <span class="o">=</span> <span class="o">-</span><span class="n">r</span><span class="p">.</span><span class="n">num</span><span class="p">,</span> <span class="n">r</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">friend</span> <span class="n">Fraction</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">-</span><span class="n">c</span> <span class="o">+</span> <span class="n">a</span><span class="p">;</span> <span class="p">}</span>
	<span class="n">Fraction</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">-=</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span> <span class="o">-</span> <span class="n">c</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="n">Fraction</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">A</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">B</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">A</span><span class="p">.</span><span class="n">num</span> <span class="o">*</span> <span class="n">B</span><span class="p">.</span><span class="n">num</span><span class="p">,</span> <span class="n">A</span><span class="p">.</span><span class="n">den</span> <span class="o">*</span> <span class="n">B</span><span class="p">.</span><span class="n">den</span><span class="p">);</span> <span class="p">}</span>
	<span class="n">Fraction</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">*=</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="n">Fraction</span> <span class="k">operator</span><span class="o">/</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">A</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">B</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">A</span><span class="p">.</span><span class="n">num</span> <span class="o">*</span> <span class="n">B</span><span class="p">.</span><span class="n">den</span><span class="p">,</span> <span class="n">A</span><span class="p">.</span><span class="n">den</span> <span class="o">*</span> <span class="n">B</span><span class="p">.</span><span class="n">num</span><span class="p">);</span> <span class="p">}</span>
	<span class="n">Fraction</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">/=</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span> <span class="o">/</span> <span class="n">c</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="n">Fraction</span> <span class="k">operator</span><span class="o">%</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">num</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">den</span> <span class="o">%</span> <span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">num</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">den</span><span class="p">),</span> <span class="n">a</span><span class="p">.</span><span class="n">den</span> <span class="o">*</span> <span class="n">c</span><span class="p">.</span><span class="n">den</span><span class="p">);</span> <span class="p">}</span>
	<span class="n">Fraction</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">%=</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span> <span class="o">=</span> <span class="o">*</span><span class="k">this</span> <span class="o">%</span> <span class="n">c</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">num</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">den</span> <span class="o">==</span> <span class="n">a</span><span class="p">.</span><span class="n">den</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">num</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">);</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">num</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">den</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">den</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">num</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&gt;</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;=</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">);</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span><span class="o">&gt;=</span><span class="p">(</span><span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">);</span> <span class="p">}</span>
	<span class="k">friend</span> <span class="n">Fraction</span> <span class="n">abs</span><span class="p">(</span><span class="n">Fraction</span> <span class="n">f</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">num</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">f</span><span class="p">.</span><span class="n">num</span> <span class="o">=</span> <span class="o">-</span><span class="n">f</span><span class="p">.</span><span class="n">num</span><span class="p">;</span>
		<span class="k">return</span> <span class="n">f</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">friend</span> <span class="n">ostream</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">f</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="n">f</span><span class="p">.</span><span class="n">num</span> <span class="o">?</span> <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">f</span><span class="p">.</span><span class="n">den</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">?</span> <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="n">f</span><span class="p">.</span><span class="n">num</span> <span class="o">:</span> <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="n">f</span><span class="p">.</span><span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="sc">'/'</span> <span class="o">&lt;&lt;</span> <span class="n">f</span><span class="p">.</span><span class="n">den</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>
<h2 id="bitset高精度">bitset高精度</h2>
<p>代替整型进行位运算，更方便并且可以处理超过最大整形范围大小的位集合。
你可以把bitset看作可以位运算的bool数组，换言之，bitset的大小是固定的。因此，用bitset做状态压缩是很方便的，也可以方便的实现集合的交并补操作。
bitset仅重载了相等不等和位运算符，原生不支持四则运算和大小比较，所以很少代替高精度数。</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="n">bitset</span><span class="o">&lt;</span><span class="mi">127</span><span class="o">&gt;</span> <span class="n">Bint</span><span class="p">;</span>
<span class="cm">/*
Bint b(unsigned long long u=0);//用u的低N位初始化b，N是一个可转成ULL类型的常量表达式，高位补0
Bint bs(string s,int pos,int m=string::npos,char zero='0',char one='1');//用s从pos位开始的m位初始化b，s中只含zero和one

b.size();//b的大小，即N
b.count();//b中1的个数

b[pos];//b中pos位的引用

b.set();//b全赋1
b.reset();//b全赋0
b.flip();//b全反转

b.to_ull();//b转成unsigned long long，b.size()&gt;64时出错
b.to_string(char zero='0',char one='1');//按参数输出字符串

os&lt;&lt;b;//按'0'和'1'打印b
is&gt;&gt;b;//按'0'和'1'读入b，当下一个字符不是'0'或'1'或读到b.size()个数后停止

==、!=、&lt;&lt;、&gt;&gt;、&amp;、|、^//保持它们在整型运算中的含义
*/</span>
<span class="c1">//大小比较，其他运算符类似
</span><span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="o">~</span><span class="n">i</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
			<span class="k">return</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">bool</span> <span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="o">~</span><span class="n">i</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
			<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">//加法
</span><span class="n">Bint</span> <span class="k">operator</span><span class="o">+</span><span class="p">(</span><span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">b</span><span class="p">.</span><span class="n">any</span><span class="p">()</span> <span class="o">?</span> <span class="p">(</span><span class="n">a</span> <span class="o">^</span> <span class="n">b</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">a</span> <span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="n">a</span><span class="p">;</span> <span class="p">}</span>
<span class="n">Bint</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="n">Bint</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span>
<span class="c1">//减法
</span><span class="n">Bint</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Bint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="o">~</span><span class="n">a</span><span class="p">;</span> <span class="p">}</span>
<span class="n">Bint</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">-=</span><span class="p">(</span><span class="n">Bint</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span> <span class="o">+=</span> <span class="o">-</span><span class="n">b</span><span class="p">;</span> <span class="p">}</span>
<span class="n">Bint</span> <span class="k">operator</span><span class="o">-</span><span class="p">(</span><span class="n">Bint</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span> <span class="o">-=</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span>
<span class="c1">//乘法
</span><span class="n">Bint</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="n">Bint</span> <span class="n">a</span><span class="p">,</span> <span class="n">Bint</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">Bint</span> <span class="n">r</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(;</span> <span class="n">b</span><span class="p">.</span><span class="n">any</span><span class="p">();</span> <span class="n">b</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">a</span> <span class="o">+=</span> <span class="n">a</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
			<span class="n">r</span> <span class="o">+=</span> <span class="n">a</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">Bint</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">*=</span><span class="p">(</span><span class="n">Bint</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span>
<span class="c1">//整除，取模
</span><span class="n">Bint</span> <span class="k">operator</span><span class="o">%=</span><span class="p">(</span><span class="n">Bint</span> <span class="o">&amp;</span><span class="n">dividend</span><span class="p">,</span> <span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">divisor</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dividend</span> <span class="o">&lt;</span> <span class="n">divisor</span> <span class="o">||</span> <span class="n">divisor</span><span class="p">.</span><span class="n">none</span><span class="p">())</span>
		<span class="k">return</span> <span class="n">dividend</span><span class="p">;</span>
	<span class="n">Bint</span> <span class="n">c</span><span class="p">,</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">;</span> <span class="n">divisor</span> <span class="o">&lt;</span> <span class="n">dividend</span><span class="p">;)</span>
	<span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">divisor</span><span class="p">;</span> <span class="o">!</span><span class="p">(</span><span class="n">dividend</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">);</span> <span class="n">c</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">++</span><span class="n">k</span><span class="p">)</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dividend</span> <span class="o">&lt;</span> <span class="n">divisor</span> <span class="o">+</span> <span class="n">c</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">res</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">k</span><span class="p">;</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dividend</span> <span class="o">&lt;</span> <span class="n">divisor</span> <span class="o">+</span> <span class="n">c</span><span class="p">)</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="n">res</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">dividend</span> <span class="o">-=</span> <span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">dividend</span><span class="p">;</span> <span class="c1">//res是商
</span><span class="p">}</span>
<span class="c1">//输入输出，bitset已经原生重载了输入输出运算符，避免歧义。
</span><span class="n">istream</span> <span class="o">&amp;</span><span class="n">getb</span><span class="p">(</span><span class="n">istream</span> <span class="o">&amp;</span><span class="n">is</span><span class="p">,</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">sign</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">is</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
	<span class="k">for</span> <span class="p">(;</span> <span class="o">!</span><span class="n">isdigit</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">ch</span> <span class="o">!=</span> <span class="n">EOF</span><span class="p">;</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">is</span><span class="p">.</span><span class="n">get</span><span class="p">())</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="sc">'-'</span><span class="p">)</span>
			<span class="n">sign</span> <span class="o">=</span> <span class="o">-</span><span class="n">sign</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">isdigit</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">is</span><span class="p">.</span><span class="n">get</span><span class="p">())</span>
		<span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">val</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">val</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">ch</span> <span class="o">^</span> <span class="sc">'0'</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sign</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
		<span class="n">val</span> <span class="o">=</span> <span class="o">-</span><span class="n">val</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">is</span><span class="p">.</span><span class="n">putback</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">ostream</span> <span class="o">&amp;</span><span class="n">putb</span><span class="p">(</span><span class="n">ostream</span> <span class="o">&amp;</span><span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">Bint</span> <span class="o">&amp;</span><span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">Bint</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">val</span><span class="p">)</span>
		<span class="n">putb</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="n">val</span> <span class="o">/</span> <span class="mi">10</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">os</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">val</span><span class="p">.</span><span class="n">to_ulong</span><span class="p">()</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">+</span> <span class="sc">'0'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

  </div>
  
  
  <div class="reward">
    <button id="rewardButton" disable="enable"
      onclick="var qr = document.getElementById('rewardQRs'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>如果我的博客帮助到你，可以请我喝一杯咖啡~</span>
    </button>
    <div id="rewardQRs">
      <table>
        <tr>
          
          <td id="wechat" class="reward_qr">
            <img id="wechat_qr" src="/public/image/wechatpay.jpg" alt="WuKwechat">
          </td>
          
          <td id="alipay" class="reward_qr">
            <img id="alipay_qr" src="/public/image/alipay.jpg" alt="WuKalipay">
          </td>
          
        </tr>
      </table>
    </div>
  </div>
  
</div>


<div id="valine">
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script>
    new Valine({
      el: '#valine',
      appId: '9hABRddSuEkTgqLrt1VSK5B1-gzGzoHsz',
      appKey: 'NJ7RwmgrxsF7KDzlqU7YewlL',
      avatar: 'identicon',
      placeholder: '在这里评论吧！',
      notify: true,
      verify: true,
      highlight: true,
      avatarForce: false,
      visitor: true,
      recordIP: true
    })
  </script>
</div>


    </div>
  </div>
  <label for="sidebar-checkbox" class="sidebar-toggle fa fa-bars fa-fw"></label>
  
  <script src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
  
  <script src="//cdn.jsdelivr.net/npm/ribbon.js/dist/ribbon.min.js"></script>
  
  <script src="//cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/autoload.js"></script>
  
  <script src="//cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js"></script>
  
  <script src="//cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script>
  
  <script src="//cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
  
  <script src="//cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"></script>
  
  <script src="/public/js/prism.js"></script>
  
  <script src="/public/js/mermaid.js"></script>
  
  <script src="/public/js/katex.js"></script>
  
  
  <script>
    // https://github.com/ghiculescu/jekyll-table-of-contents
    (function ($) {
      $.fn.toc = function (options) {
        var defaults = {
          noBackToTopLinks: false,
          title: '目录',
          minimumHeaders: 3,
          headers: 'h1, h2, h3, h4, h5, h6',
          listType: 'ol', // values: [ol|ul]
          showEffect: 'show', // values: [show|slideDown|fadeIn|none]
          showSpeed: 0, // set to 0 to deactivate effect
          classes: {
            list: '',
            item: ''
          }
        },
          settings = $.extend(defaults, options);

        function fixedEncodeURIComponent(str) {
          return encodeURIComponent(str).replace(/[!'()*]/g, function (c) {
            return '%' + c.charCodeAt(0).toString(16);
          });
        }

        function createLink(header) {
          var innerText = (header.textContent === undefined) ? header.innerText : header.textContent;
          return "<a href='#" + fixedEncodeURIComponent(header.id) + "'>" + innerText + "</a>";
        }

        var headers = $(settings.headers).filter(function () {
          // get all headers with an ID
          var previousSiblingName = $(this).prev().attr("name");
          if (!this.id && previousSiblingName) {
            this.id = $(this).attr("id", previousSiblingName.replace(/\./g, "-"));
          }
          return this.id;
        }), output = $(this);
        if (!headers.length || headers.length < settings.minimumHeaders || !output.length) {
          $(this).hide();
          return;
        }

        if (0 === settings.showSpeed) {
          settings.showEffect = 'none';
        }

        var render = {
          show: function () { output.hide().html(html).show(settings.showSpeed); },
          slideDown: function () { output.hide().html(html).slideDown(settings.showSpeed); },
          fadeIn: function () { output.hide().html(html).fadeIn(settings.showSpeed); },
          none: function () { output.html(html); }
        };

        var get_level = function (ele) { return parseInt(ele.nodeName.replace("H", ""), 10); };
        var highest_level = headers.map(function (_, ele) { return get_level(ele); }).get().sort()[0];
        var return_to_top = '<i class="icon-arrow-up back-to-top"> </i>';

        var level = get_level(headers[0]),
          this_level,
          html = settings.title + " <" + settings.listType + " class=\"" + settings.classes.list + "\">";
        headers.on('click', function () {
          if (!settings.noBackToTopLinks) {
            window.location.hash = this.id;
          }
        })
          .addClass('clickable-header')
          .each(function (_, header) {
            this_level = get_level(header);
            if (!settings.noBackToTopLinks && this_level === highest_level) {
              $(header).addClass('top-level-header').after(return_to_top);
            }
            if (this_level === level) // same level as before; same indenting
              html += "<li class=\"" + settings.classes.item + "\">" + createLink(header);
            else if (this_level <= level) { // higher level than before; end parent ol
              for (var i = this_level; i < level; i++) {
                html += "</li></" + settings.listType + ">"
              }
              html += "<li class=\"" + settings.classes.item + "\">" + createLink(header);
            }
            else if (this_level > level) { // lower level than before; expand the previous to contain a ol
              for (i = this_level; i > level; i--) {
                html += "<" + settings.listType + " class=\"" + settings.classes.list + "\">" +
                  "<li class=\"" + settings.classes.item + "\">"
              }
              html += createLink(header);
            }
            level = this_level; // update for the next one
          });
        html += "</" + settings.listType + ">";
        if (!settings.noBackToTopLinks) {
          $(document).on('click', '.back-to-top', function () {
            $(window).scrollTop(0);
            window.location.hash = '';
          });
        }
        render[settings.showEffect]();
      };
    })(jQuery);
    $(document).ready(function () {
      $('#toc').toc();
    });
  </script>
  
  
  <script>
    (function () {
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>
  
</body>

</html>
